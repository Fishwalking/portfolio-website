/* css/dark-veil.css */
#dark-veil {
  position: fixed;
  inset: 0;
  pointer-events: none; /* 클릭 간섭 방지 */
  z-index: 9999; /* 필요 시 조정 */
  --vx: 50%;
  --vy: 50%;
  --r1: 140px; /* 투명 중심부 반경 */
  --r2: 280px; /* 가장자리까지의 페이드 반경 */
  --veil: rgba(0, 0, 0, 0.66); /* 전체 어둡기 */
  background: var(--veil);
  transition: opacity 0.25s ease;
}

/* 마스크 지원 시: 커서 주변만 투명하게 뚫림 */
@supports (
  (mask-image: radial-gradient(circle at 50% 50%, #000 0, transparent 100%)) or
    (
      -webkit-mask-image: radial-gradient(circle at 50% 50%, #000 0, transparent
            100%)
    )
) {
  #dark-veil {
    mask-image: radial-gradient(
      circle var(--r2) at var(--vx) var(--vy),
      transparent calc(var(--r1) - 1px),
      black var(--r1)
    );
    -webkit-mask-image: radial-gradient(
      circle var(--r2) at var(--vx) var(--vy),
      transparent calc(var(--r1) - 1px),
      black var(--r1)
    );
    mask-repeat: no-repeat;
    -webkit-mask-repeat: no-repeat;
  }
}

/* 마스크 미지원 브라우저용 폴백: 커서 주변만 살짝 밝게 */
@supports not (
  mask-image: radial-gradient(circle at 50% 50%, #000 0, transparent 100%)
) {
  #dark-veil {
    background: radial-gradient(
      circle var(--r2) at var(--vx) var(--vy),
      rgba(255, 255, 255, 0.1),
      var(--veil) 45%
    );
  }
}

/* 시작/토글용 */
#dark-veil.is-hidden {
  opacity: 0;
}

/* 모바일 최적화(반경 축소) */
@media (max-width: 480px) {
  #dark-veil {
    --r1: 90px;
    --r2: 180px;
    --veil: rgba(0, 0, 0, 0.58);
  }
}
